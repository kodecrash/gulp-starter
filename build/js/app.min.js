var vKey,focusVar,data,paper,enableKey11=!0,isDecimalPressed=!1;function placeCaretAtEnd(e){var t,r;e.focus(),void 0!==window.getSelection&&void 0!==document.createRange?((r=document.createRange()).selectNodeContents(e),r.collapse(!1),(t=window.getSelection()).removeAllRanges(),t.addRange(r)):void 0!==document.body.createTextRange&&((r=document.body.createTextRange()).moveToElementText(e),r.collapse(!1),r.select())}function axis(e,t,r,a,n,s,i,o,l,c){this.start=e,this.end=t,this.startValue=new BigNumber(0),this.endValue=new BigNumber(10),this.intersect=r,this.rangeStart=a?new BigNumber(-10):new BigNumber(0),this.rangeEnd=new BigNumber(10),this.allowNeg=a,this.orientation=n,this.numMajorTicks=new BigNumber(10),this.precision=new BigNumber(1),this.color=o,this.initialDistance=new BigNumber(0),this.unit=l,this.displayUnit=c,this.numMinorTicks=new BigNumber(10),this.majorTickDist=(this.end-this.start)/10,this.handle=0,this.handleTicks=0,this.minorTickDist=0,this.draw=drawAxis,this.getUnit=axisGetUnit,this.getX=axisGetX,this.setPrecision=axisSetPrecision,this.moveAxis=moveAxis,this.CalculateMultipler=CalculateMultipler,this.multipler=-1,this.drawMinorTick=drawMinorTick,this.drawMajorTick=drawMajorTick,this.rangeMarkers=rangeMarkers,this.findRange=findRange}function rangeMarkers(e){$(".markers").css("display","none");var t=Math.floor(e.x/this.majorTickDist),e=Math.floor(e.y/this.majorTickDist);previousPrecision=this.precision,Math.abs(e-t)<=1?(e=min(t,e),leftMarkerSmallRange.css("display","block"),leftMarkerSmallRangeSpan.text(previousPrecision.times(e).plus(this.startValue).valueOf()),rightMarkerSmallRange.css("display","block"),rightMarkerSmallRangeSpan.text(previousPrecision.times(e+1).plus(this.startValue).valueOf()),leftMarkerSmallRange.width(40+leftMarkerSmallRangeSpan.outerWidth()+2).css("left",this.getX(previousPrecision.times(e).plus(this.startValue))-(40+leftMarkerSmallRangeSpan.outerWidth())),rightMarkerSmallRange.width(40+rightMarkerSmallRangeSpan.outerWidth()+2).css("left",this.getX(previousPrecision.times(e+1).plus(this.startValue)))):showRangeInterval(this.startValue,this.endValue)}function showRangeInterval(e,t){leftMarkerBigRange.css("display","block"),leftMarkerBigRangeSpan.text(e.valueOf()),rightMarkerBigRange.css("display","block"),rightMarkerBigRangeSpan.text(t.valueOf()),leftMarkerBigRange.width(40+leftMarkerBigRangeSpan.outerWidth()+2),rightMarkerBigRange.width(40+rightMarkerBigRangeSpan.outerWidth()+2)}function CalculateMultipler(e,t,r){var a,n=Math.floor(t.x/this.majorTickDist),s=Math.floor(t.y/this.majorTickDist),t=this.precision;Math.abs(s-n)<=1?(r?(a=min(n,s),this.endValue=t.times(a+1).plus(this.startValue),--this.multipler):(a=min(n,s),this.endValue=this.endValue.times(10),this.multipler+=1),this.setPrecision(),$(".markers").css("display","none")):(r?(--this.multipler,this.endValue=this.endValue.div(10)):(this.multipler+=1,this.endValue=this.endValue.times(10)),this.setPrecision()),showRangeInterval(this.startValue,this.endValue),this.draw()}function moveAxis(e){e?this.endValue.lessThan(this.rangeEnd)&&(this.startValue=this.startValue.plus(this.precision),this.endValue=this.endValue.plus(this.precision)):this.startValue.greaterThan(this.rangeStart)&&(this.startValue=this.startValue.minus(this.precision),!this.allowNegative&&this.startValue.valueOf()<0&&(this.startValue=new BigNumber(0)),this.endValue=this.endValue.minus(this.precision)),showRangeInterval(this.startValue,this.endValue),this.draw()}function drawAxis(){var e=this.intersect-10,t=1;context.globalAlpha=1,context.fillStyle="#99cc66",context.fillRect(0,e,context.canvas.width,40),context.lineWidth=1,context.strokeStyle=this.color,context.beginPath(),context.moveTo(this.start,this.intersect),context.lineTo(this.end,this.intersect),context.closePath(),context.stroke(),this.majorTickDist=BigNumber(this.end-this.start).dividedBy(this.numMajorTicks),this.minorTickDist=this.majorTickDist.dividedBy(this.numMinorTicks),this.majorTickDist.valueOf()<15?this.numMinorTicks=new BigNumber(0):this.majorTickDist.valueOf()<35?this.numMinorTicks=new BigNumber(2):this.majorTickDist.valueOf()<70&&(this.numMinorTicks=new BigNumber(5)),1e3<=this.numMajorTicks.valueOf()?(t=100,this.numMinorTicks=new BigNumber(0)):550<=this.numMajorTicks.valueOf()?(t=50,this.numMinorTicks=new BigNumber(0)):160<=this.numMajorTicks.valueOf()?(t=20,this.numMinorTicks=new BigNumber(0)):100<=this.numMajorTicks.valueOf()?(t=10,this.numMinorTicks=new BigNumber(0)):50<=this.numMajorTicks.valueOf()&&(t=5,this.numMinorTicks=new BigNumber(0));for(var r=new BigNumber(0);r.lessThanOrEqualTo(this.numMajorTicks);r=r.plus(t)){if(majorTick=this.majorTickDist.times(r).plus(this.start).round(),r.lessThan(this.numMajorTicks))for(var a=new BigNumber(0);a.lessThan(this.numMinorTicks);a=a.plus(1))minorTick=Number(this.minorTickDist.times(a).plus(majorTick).round().valueOf()),minorTick<=this.end&&this.drawMinorTick(minorTick,this.intersect);this.drawMajorTick(Number(majorTick.valueOf()),this.intersect),context.font="bold 10pt Arial",context.textAlign="center",context.fillStyle=this.color;var n=this.precision.times(r).plus(this.startValue).valueOf();context.fillText(n,majorTick,this.intersect+30),this.displayUnit&&(context.textAlign="left",context.fillText(this.unit,this.start,this.intersect-15))}}function roundOf(e,t){var r=0,t=Math.abs(t)+"";if(-1===t.indexOf(".")){if(-1!==t.indexOf("e"))return e;r=0}else r=t.split(".")[1].length;return e.toFixed(r)}function axisGetUnit(e){var t=0;return console.log("got x value ---- "+e),t=new BigNumber(e-this.start).div(this.majorTickDist).floor().times(this.precision).plus(this.startValue).plus(BigNumber(e-this.start).mod(this.majorTickDist).div(this.minorTickDist).times(this.precision.div(10))),Number(t.valueOf())}function axisGetX(e){var t=null;return t=this.startValue.lessThanOrEqualTo(e)&&this.endValue.greaterThanOrEqualTo(e)?Number(this.startValue.minus(e).absoluteValue().div(this.precision.div(10)).times(this.minorTickDist).plus(this.start).valueOf()):t}function axisSetPrecision(){this.precision=new BigNumber(10);var e=Math.abs(this.multipler);if(0<this.multipler)for(var t=0;t<e;t++)this.precision=this.precision.times(10);else for(t=0;t<e;t++)this.precision=this.precision.dividedBy(10);this.findRange()}function findRange(){var e=new BigNumber(10),t=null;if((t=(this.endValue.abs().lt(this.startValue.abs())?this.startValue:this.endValue).abs()).gte(1)){for(var r=new BigNumber(1);r.lessThanOrEqualTo(t);r=r.times(10))e=e.times(10);e=e.div(10)}else{for(r=new BigNumber(1);r.gte(Math.abs(t));r=r.div(10))e=e.div(10);e=e.times(10)}this.allowNeg&&(this.rangeStart=e.times(-1)),this.rangeEnd=e}function drawMajorTick(e,t){context.lineWidth=1,context.strokeStyle=this.color,context.beginPath(),context.moveTo(e,t-15),context.lineTo(e,t+15),context.closePath(),context.stroke()}function drawMinorTick(e,t){context.lineWidth=1,context.strokeStyle=this.color,context.beginPath(),context.moveTo(e,t-7),context.lineTo(e,t+7),context.closePath(),context.stroke()}window.vKeyPad=function(e){(vKey=this).TextBox=[],this.TextBox[0]=e[0];try{(0==e.indexOf(".")||0==e.indexOf("#"))&&(this.TextBox=$(e))}catch(e){}this.Keys=["1","2","3","4","5","6","7","8","9","0",".","&#x02423;"],this.AllowedKeys=[8,46,37,39],this.AutoClear=!1,this.KeyPad,this.Width=150,this.Height=150,this.MaximumDig=4,this.CurrentFocus=null;for(var t=0;t<this.TextBox.length;t++){var r=$(this.TextBox[t]);r[0]&&(r.bind("keypress",this.onKeyPress),r.bind("click",this.onFocus),r.bind("focus",this.onFocus),r.bind("blur",this.onBlur),r.blur())}this.init()},vKeyPad.prototype={init:function(){for(var e=0;e<this.Keys.length;e++)this.AllowedKeys.push(this.Keys[e].charCodeAt(0));this.KeyPad=$('<div class="keypadHolder" style="z-index:1000;position:absolute;width:180px; height:215px;display:table;" />');var t=Math.ceil(this.Keys.length/3),r=0,a=$('<div class="numPadHeader" style="position:absolute;left:5px; top:5px;" />');this.KeyPad.append(a);var n=$('<div id="numPadClose" class="vkBtnCls" />');a.append(n),n.bind("click",this.hidePad);var s=$('<div style="display:table-row;" />');this.KeyPad.append(s),(n=$('<div id="key_emp1" class="vkBtnEmp" />')).html(""),s.append(n),(n=$('<div id="key_emp2" class="vkBtn" />')).html("/"),s.append(n),n.bind("click",this.onNumClick),(n=$('<div id="key_bs" class="vkBtnBS" />')).html('<svg class="delete" width="23" height="18" viewBox="0 0 1024 1024"><g><path d="M921.6 153.6h-489.165c-22.528 0-54.835 12.134-71.782 26.982l-347.955 304.435c-16.947 14.848-16.947 39.117 0 53.965l347.955 304.486c16.947 14.797 49.254 26.931 71.782 26.931h489.165c56.371 0 102.4-46.080 102.4-102.4v-512c0-56.32-46.029-102.4-102.4-102.4zM777.779 716.8l-130.918-130.918-130.816 130.918-73.933-73.882 130.867-130.918-130.867-130.867 73.933-73.933 130.867 130.867 130.867-130.867 73.882 73.933-130.816 130.867 130.867 130.867-73.933 73.933z"></path></g></svg>'),s.append(n),n.bind("click",this.onNumClick);for(var i=0;i<t;i++){s=$('<div style="display:table-row; background:red;" />');this.KeyPad.append(s);for(var o=0;o<3;o++)this.Keys[r]&&((n=$('<div id="key_'+r+'" class="vkBtn" />')).html(this.Keys[r]),s.append(n),n.bind("click",this.onNumClick),r++)}$("#vkeyCont").append(this.KeyPad),$(".keypadHolder").draggable({containment:"#vkeyCont"}),this.KeyPad.css({visibility:"hidden"}),$("#navigation-container").css({visibility:"hidden"})},onNumClick:function(e){var t=vKey.getSelf();e=e||window.event;var r=$(e.target);if(0<(r="key_bs"!=r.attr("id")?r.parents("#key_bs"):r).length&&(null!=(n=t.ActualText)&&"undefined"!=n&&0<n.length&&(n=n.substr(0,n.length-1)),t.ActualText=n,ms=n.replace(/&([-#.\w]+);|\\([a-z]+)(?: |(?=[^a-z]))/gi,function(e,t,r){if(r&&(M.macros_[r]||M.macro1s_[r]))return e;var a="&"+(t||r)+";",n=$("<span>"+a+"</span>").text();return n!=a?n:ents_[t||r]||e}),h=ms.replace(/</g,"&lt;"),t.ActualText!=h&&(t.ActualText=h),$(t.CurrentFocus).empty().append(s)),console.log(t.ActualText),e.target&&t.ActualText.length<vKey.MaximumDig){$.Event("keypress");if("key_bs"!=$(e.target).attr("id")){var a=$(e.target).text();"key_11"==e.target.id&&(a=" "),t.ActualText+=a,n=t.ActualText,"."==t.ActualText.substring(t.ActualText.length-1)&&t.ActualText.substring(t.ActualText.length-2,t.ActualText.length-1)==t.ActualText.substring(t.ActualText.length-1)&&(n=t.ActualText=t.ActualText.substring(0,t.ActualText.length-1)),1<t.ActualText.split(".").length-1&&-1!=t.ActualText.indexOf(".")&&(n=t.ActualText.substring(0,t.ActualText.length-1)),"/"==t.ActualText.substring(t.ActualText.length-1)&&(n=t.ActualText=t.ActualText.substring(0,t.ActualText.length-1).trim()+"/"),1<t.ActualText.split("/").length-1&&-1!=t.ActualText.indexOf("/")&&(n=t.ActualText.substring(0,t.ActualText.length-1)),"/ "==t.ActualText.substring(t.ActualText.length-2)&&(n=t.ActualText.substring(0,t.ActualText.length-1))," "==t.ActualText.substring(t.ActualText.length-1)&&t.ActualText.substring(t.ActualText.length-2,t.ActualText.length-1)==t.ActualText.substring(t.ActualText.length-1)&&(n=t.ActualText=t.ActualText.substring(0,t.ActualText.length-1)),new RegExp("[0-9]").test(this.innerText)&&"/"==t.ActualText.substring(0,t.ActualText.length-2)&&(n=t.ActualText=t.ActualText.substring(0,t.ActualText.length-1).trim()+this.innerText),ms=n.replace(/&([-#.\w]+);|\\([a-z]+)(?: |(?=[^a-z]))/gi,function(e,t,r){if(r&&(M.macros_[r]||M.macro1s_[r]))return e;var a="&"+(t||r)+";",n=$("<span>"+a+"</span>").text();return n!=a?n:ents_[t||r]||e}),h=ms.replace(/</g,"&lt;"),t.ActualText!=h&&(t.ActualText=h);try{s=M.sToMathE(ms,!0)}catch(e){s=String(e)}$(t.CurrentFocus).empty().append(s)}for(var n,s,i=1;i<=7;i++)if(t.CurrentFocus.id=="x"+i&&1<t.ActualText.length&&"–"==$(e.target).text()){n=(n=t.ActualText).substr(0,n.length-1),ms=n.replace(/&([-#.\w]+);|\\([a-z]+)(?: |(?=[^a-z]))/gi,function(e,t,r){if(r&&(M.macros_[r]||M.macro1s_[r]))return e;var a="&"+(t||r)+";",n=$("<span>"+a+"</span>").text();return n!=a?n:ents_[t||r]||e}),h=ms.replace(/</g,"&lt;"),t.ActualText!=h&&(t.ActualText=h);try{s=M.sToMathE(ms,!0)}catch(e){s=String(e)}$(t.CurrentFocus).empty().append(s),console.log("text append here2")}}vKeyPadEvent(e,t),onTextChanged(e);a=$(t.CurrentFocus).attr("id").substr(1);$("#editorTxt"+a).val(t.ActualText),placeCaretAtEnd(t.CurrentFocus)},onKeyPress:function(e){alert("here21");var t=vKey.getSelf(),r=!1,a=(e=e||window.event).which;0!=e.charCode||e.charCode,0!=e.keyCode||e.keyCode,0!=e.which||e.which,(r=0<=t.AllowedKeys.indexOf(a)?!0:r)||e.preventDefault(),0==t.ActualText.length&&(t.ActualText="",e.target.innerText=""),placeCaretAtEnd(e.target)},onFocus:function(e){enableKey11=!0,$(".numTxt").each(function(){});var t=vKey.getSelf();$(".keypadHolder").css("visibility","hidden"),t.KeyPad&&t.KeyPad.css({visibility:"visible"}),(focusVar=null==focusVar?$(e.currentTarget)[0]:focusVar)!=$(e.currentTarget)[0]&&(focusVar=$(e.currentTarget)[0],t.ActualText=""),t.AutoClear&&(e.target.innerText="",t.ActualText=""),t.CurrentFocus=$(e.currentTarget)[0];$(t.CurrentFocus).attr("id").substr(1);t.ActualText=""},hidePad:function(){var e=vKey.getSelf();e.KeyPad&&e.KeyPad.css({visibility:"hidden"}),$(".numTxt").blur()},onBlur:function(){var e=vKey.getSelf();try{var t=$(event.currentTarget).attr("id").substr(1);$("#editorTxt"+t).val(e.ActualText)}catch(e){}},getSelf:function(){return this}};var color,markerA,markerB,axis1,currentX=0,currentY=200,counter=0,currentValue=100,type="add",counter=0,FractionNum=!1,touchstart=!1,initialDistance=0,leftshiftOrigin=!1,rightShiftOrigin=!1,context=null,buttonDown=!1,leftMarkerSmallRange=null,leftMarkerSmallRangeSpan=null,rightMarkerSmallRange=null,rightMarkerSmallRangeSpan=null,leftMarkerBigRange=null,leftMarkerBigRangeSpan=null,rightMarkerBigRange=null,rightMarkerBigRangeSpan=null,doubletouch=!1,singletouch=!1,activityStarted=!1,inputBoxArray=[],markersTempArray=[],connectorColor="#"+function e(t){return(t+=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"][Math.floor(16*Math.random())])&&6==t.length?t:e(t)}(""),allowPinchZoom=!1;function min(e,t){return e<=t?e:t}function max(e,t){return t<=e?e:t}function toggleClassButton(e,t){e.hasClass(t)?e.removeClass(t):e.addClass(t)}function vKeyPadEvent(e,t){console.log("keyPad :"+e)}function removeA(e){for(var t,r,a=arguments,n=a.length;1<n&&e.length;)for(t=a[--n];-1!==(r=e.indexOf(t));)e.splice(r,1);return e}function resetActivity(){$(this).removeClass("icoResetMove"),lineLength=10,context.clearRect(0,0,canvas.width,canvas.height),axis1=new axis(winPadding,context.canvas.width-winPadding,axisA,allowNegative,10,lineLength,.1,axisColor,"",!1),OnResizeCalled(),isEraseClicked=clicked=clickedSubtract=!1,deleteType="one",$("#reset").removeClass("reset_selected"),$("#scaleHidden").css("display","none"),setting="add",$("#addbackHidden").css("display","none"),$("#addHidden").css("display","none"),refreshWindow(),markers=[],colors=[],yCurve=[],$(".numTxt").remove(),$("#vkeyCont").html(""),typesArray=[]}function drawMarker(){context.globalAlpha=1,context.lineWidth=1,context.beginPath(),context.fillStyle=this.color1,context.strokeStyle="none",context.arc(this.x,this.y,this.size,0,2*Math.PI,!1),context.fill(),context.stroke(),convertToFraction(this.unitVal,this.x,this.y-20,10,"#000000")}$(document).ready(function(){function r(){$("#settingContainer").css("display","none"),$("#setting").removeClass("settingButton_selected"),$("#setting").addClass("settingButton_normal")}$("#settingContainer").draggable({containment:"parent"}),$("#scale").click(function(){$("#scaleHidden").css("display","block"),clicked=!0}),$(".markers").css("opacity",0),$("#scaleHidden").click(function(){$("#scaleHidden").css("display","none"),clicked=!1}),$(".radio2").click(function(){$(".radio2").css("background-image","url(images/radioB.png)"),$("#"+this.id).css("background-image","url(images/radioB1.png)"),"radio3"==this.id||"radio5"==this.id?(FractionNum=!1,$(".radioFrac").unbind("click"),$(".radioFrac").css("background-image","url(images/radioB.png)"),axis1.draw()):($("#radioFrac6").css("background-image","url(images/radioB1.png)"),FractionNum=!0,$(".radioFrac").bind("click",function(){$(".radioFrac").css("background-image","url(images/radioB.png)"),$("#"+this.id).css("background-image","url(images/radioB1.png)"),console.log($(this).attr("division")),selectedFraction=$(this).attr("division"),axis1.numMinorTicks=parseInt($(this).attr("division")),axis1.draw()})),console.log("FractionNum --- "+FractionNum)}),$("#close_Button").live("click",function(){$("#infoContainer").css("display","none"),$("#mainContainerHidden").css("display","none"),activityStarted=!0}),$(".close_Button").live("click",function(){$("#errorContainer").css("display","none")}),$("#errorContainer #yes").live("click",function(){-1!=jQuery.inArray("two",typesArray)?(removeA(typesArray,"two"),markers=[],colors=[],yCurve=[],refreshWindow(),$(".numTxt").remove(),clickedSubtract=!1,$("#subtract").trigger("click"),$("#vkeyCont").html("")):-1!=jQuery.inArray("subtract",typesArray)?(removeA(typesArray,"subtract"),markers=[],colors=[],yCurve=[],refreshWindow(),$(".numTxt").remove(),$("#vkeyCont").html(""),"add"===$("#errorContainer").data("target")?$("#add").trigger("click"):"addback"===$("#errorContainer").data("target")&&(removeA(typesArray,"three"),$("#addback").trigger("click"))):(markers=[],colors=[],yCurve=[],refreshWindow()),$("#errorContainer").css("display","none")}),$("#errorContainer #no").live("click",function(){$("#errorContainer").css("display","none")}),$("#setting").live("click touchstart",function(){$("#settingContainer").css("display","block"),$("#setting").removeClass("settingButton_normal"),$("#setting").addClass("settingButton_selected")}),$("#close").live("click touchstart",function(){r()}),$(".icoInfo").live("click",function(){$("#infoContainer").css("display","block"),$("#mainContainerHidden").css("display","block")}),$(".icoReset").click(function(){var e=$(this);r(),e.removeClass("icoResetMove");var t=setTimeout(function(){clearInterval(t),e.addClass("icoResetMove")},200);a=10,context.clearRect(0,0,h.width,h.height),axis1=new axis(s,context.canvas.width-s,i,n,10,a,.1,l,"",!1),k(),isEraseClicked=clicked=clickedSubtract=!1,deleteType="one",$("#reset").removeClass("reset_selected"),$("#scaleHidden").css("display","none"),$("#addbackHidden").css("display","none"),$("#addHidden").css("display","none"),refreshWindow(),markers=[],colors=[],yCurve=[],$(".numTxt").remove(),$("#vkeyCont").html(""),typesArray=[]});$.getJSON("manifest.json",function(e){data=e});var o=!1,c=!1,d=!1,a=5,n=!0,s=25,u=20,h=document.getElementById("canvas1");context=h.getContext("2d");document.getElementById("buttonAlign");var i=200,l="black",e=(context.canvas.width,!1),x=!1,g=(document.getElementById("topValue"),document.getElementById("bottomValue"),{});markerA=new marker(0,0,5,!1,"green"),markerB=new marker(0,0,5,!1,"blue"),axis1=new axis(s,context.canvas.width-s,i,n,10,a,.1,l,"",!1);var t=!1;function m(e){c&&(context.globalAlpha=1,context.fillStyle="gray",context.fillRect(0,265,context.canvas.width,context.canvas.height),context.font="bold 14pt Arial",context.textAlign="left",context.fillStyle="black",context.fillText(e,10,290))}function k(){m("Going from : "+context.canvas.width+":"+context.canvas.height+" to "+window.innerWidth+"px:"+window.innerHeight+"px"),context.canvas.width=1e3,context.canvas.height=450,axis1.end=context.canvas.width-20,t?(axis1.draw(),markerA.x=axis1.getX(markerA.unitVal),x?e?(markerA.x=axis1.getX(markerA.unitVal),markerB.x=markerA.x):(markerB.x=axis1.getX(markerB.unitVal),markerA.x=markerB.x):(markerA.x=axis1.getX(markerA.unitVal),markerB.x=axis1.getX(markerB.unitVal))):(axis1.draw(),context.beginPath(),context.fillStyle="#99cc66",context.strokeStyle="Black",context.globalAlpha=.8,context.arc(context.canvas.width/2,450,50,0,2*Math.PI,!1),context.fill(),context.font="bold 18pt Arial",context.textAlign="center",context.fillStyle="black",context.fillText("Start",context.canvas.width/2,155))}window.addEventListener("load",function(){function n(e,t){this.x=e,this.y=t}function s(e,t){if(200<=t.pageY&&t.pageY<=340)if(axis1.handleTicks=axis1.numMajorTicks,axis1.handle=e.x,clicked)for(var r=0;r<markers.length;r++){if(e.x>markers[r].x-u&&e.x<markers[r].x+u&&e.y>markers[r].y-u&&e.y<markers[r].y+u){if(isEraseClicked){if("four"==deleteType||"one"==deleteType?(markers.splice(r,1),"four"==deleteType&&1==markers.length&&(markers.splice(0,1),$("#x"+r+(r+1)).remove())):"transparent"==markers[r].color1?(markers.splice(r-1,2),$("#x"+(r-1)+r).remove()):(markers.splice(r,2),$("#x"+r+(r+1)).remove()),refreshWindow(),"two"==types||"three"==types)for(var a=0;a<markers.length;a+=2)markers[a].draw(),connectMarkers(markers[a],markers[a+1],a);else if("one"==types)for(a=0;a<markers.length;a+=1)markers[a].draw(),0<a&&connectMarkers(markers[a],markers[a-1],a)}else x=!1,markers[r].prevX=markers[r].x,markers[r].x=markers[r].prevX,s=e.x,i=e.y,(o||c||d)&&(context.beginPath(),context.fillStyle="red",context.strokeStyle="Black",context.globalAlpha=.6,context.arc(s,i,u,0,2*Math.PI,!1),context.fill(),context.stroke(),context.lineWidth=1,context.strokeStyle="black",context.beginPath(),context.moveTo(s,i-6),context.lineTo(s,i+6),context.closePath(),context.stroke(),context.beginPath(),context.moveTo(s-6,i),context.lineTo(s+6,i),context.closePath(),context.stroke()),grabbed=r,buttonDown=!0;break}null!=markers[r+1]&&("two"==types?(e.x>markers[r].x&&e.x<markers[r+1].x||e.x>markers[r+1].x&&e.x<markers[r].x)&&(console.log("coordinates -x:"+e.x+" coordinates -y:"+e.y),0===$(".marker"+(r+1)).length&&0===$(".marker"+r).length&&($("#mainContainer").append("<div style='left:"+(e.x+10)+"px;top:"+(e.y-30)+"px;position:absolute;display:block;' id='x"+r+(r+1)+"' class='numTxt marker"+r+" marker"+(r+1)+"'></div>"),$("#page-0").append("<div id='editorTxt"+markers.length/2+"'></div>"),bindKeyPad(),markers[r].hasInputBox=1,markers[r+1].hasInputBox=1)):"three"==types?e.x>markers[r+1].x&&e.x<markers[r].x&&(console.log("coordinates -x:"+e.x+" coordinates -y:"+e.y),0===$(".marker"+(r+1)).length&&0===$(".marker"+r).length&&($("#mainContainer").append("<div style='left:"+(e.x+10)+"px;top:"+(e.y-30)+"px;position:absolute;display:block;' id='x"+r+(r+1)+"' class='numTxt marker"+r+" marker"+(r+1)+"'></div>"),$("#page-0").append("<div id='editorTxt"+markers.length/2+"'></div>"),bindKeyPad(),markers[r].hasInputBox=1,markers[r+1].hasInputBox=1)):"four"===deleteType&&(e.x>markers[r].x&&e.x<markers[r+1].x||e.x>markers[r+1].x&&e.x<markers[r].x)&&(console.log("coordinates -x:"+e.x+" coordinates -y:"+e.y),0===$(".marker"+r).length&&($("#mainContainer").append("<div style='left:"+(e.x+10)+"px;top:"+(e.y-60)+"px;position:absolute;display:block;' id='x"+r+"' class='numTxt marker"+r+"'></div>"),$("#page-0").append("<div id='editorTxt"+markers.length/2+"'></div>"),bindKeyPad(),markers[r].hasInputBox=1,markers[r+1].hasInputBox=1)))}else{var n=$("#canvas1").offset().left;allowPinchZoom=!0,null!=t.targetTouches&&(2==t.targetTouches.length?(initialDistance=Math.abs(t.targetTouches[0].pageX-t.targetTouches[1].pageX),g={x:t.targetTouches[0].pageX-n,y:t.targetTouches[1].pageX-n},axis1.rangeMarkers(g),singletouch=!(doubletouch=!0)):1==t.targetTouches.length&&(singletouch=!(doubletouch=!1),g=t.targetTouches[0].pageX-n,swipeIndicator.css({left:t.targetTouches[0].pageX-swipeIndicator.width()/2,display:"block"}),showRangeInterval(axis1.startValue,axis1.endValue)))}var s,i}function i(e,t){if(200<=t.pageY&&t.pageY<=340)if(clicked){if(1==buttonDown&&null!=grabbed)if(e.x<25&&(e.x=25),980<e.x&&(e.x=980),"two"==types){refreshWindow(),grabbed%2==0?(e.x>=markers[s=grabbed+1].x?markers[grabbed+1].arrowDirection="left":markers[grabbed+1].arrowDirection="right",e.x<=markers[grabbed+1].x-markers[grabbed+1].x-markers[grabbed].x&&(markers[grabbed].x=e.x,markers[grabbed].draw()),markers[grabbed+1].x=e.x+markers[grabbed+1].x-markers[grabbed].x,markers[grabbed+1].draw(),markers[grabbed].x=e.x,markers[grabbed].draw()):(e.x<=markers[grabbed-1].x?markers[grabbed].arrowDirection="left":markers[grabbed].arrowDirection="right",markers[grabbed].x=e.x,markers[grabbed-1].draw(),s=grabbed-1),$(".marker"+grabbed).css("left",e.x),grabbed<s?connectMarkers(markers[grabbed],markers[s]):connectMarkers(markers[s],markers[grabbed]);for(var r=0;r<markers.length;r++)r<(a=r%2==0?(markers[r].draw(),r+1):(markers[r].draw(),r-1))?(console.log("Left Value ---------------------"),connectMarkers(markers[r],markers[a],r)):(console.log("Right Value ---------------------"),connectMarkers(markers[a],markers[r])),markers[r].unitVal=axis1.getUnit(markers[r].x)}else if("three"==types){refreshWindow(),grabbed%2==0?(e.x>=markers[s=grabbed+1].x?markers[grabbed+1].arrowDirection="right":markers[grabbed+1].arrowDirection="left",e.x<=markers[grabbed+1].x-markers[grabbed+1].x-markers[grabbed].x&&(markers[grabbed].x=e.x,markers[grabbed].draw()),markers[grabbed+1].x=e.x+markers[grabbed+1].x-markers[grabbed].x,markers[grabbed+1].draw(),markers[grabbed].x=e.x,markers[grabbed].draw()):(e.x<=markers[grabbed-1].x?markers[grabbed].arrowDirection="right":markers[grabbed].arrowDirection="left",markers[grabbed].x=e.x,markers[grabbed-1].draw(),s=grabbed-1),$(".marker"+grabbed).css("left",e.x),grabbed<s?connectMarkers(markers[grabbed],markers[s]):connectMarkers(markers[s],markers[grabbed]);for(var a,r=0;r<markers.length;r++)r<(a=r%2==0?(markers[r].draw(),r+1):(markers[r].draw(),r-1))?connectMarkers(markers[r],markers[a],r):connectMarkers(markers[a],markers[r]),markers[r].unitVal=axis1.getUnit(markers[r].x)}else{refreshWindow(),markers[grabbed].x=e.x,markers[grabbed].draw();for(o=1;o<markers.length;o++)connectMarkers(markers[o],markers[o-1],o),markers[o].unitVal=axis1.getUnit(markers[o].x),markers[0].unitVal=axis1.getUnit(markers[0].x);var n=markers[grabbed].x,s=markers[grabbed+1].x;console.log("GrabbedX :"+n+" GrabbedY :"+s),$(".marker"+grabbed).css("left",n+(s-n)/2)}}else{var i,n=$("#canvas1").offset().left;if(null!=t.targetTouches&&(2==t.targetTouches.length&&doubletouch?allowPinchZoom&&((i=Math.abs(t.targetTouches[0].pageX-t.targetTouches[1].pageX))<initialDistance?50<=initialDistance-i&&(l(),tempX=e.x,scaleRatio=initialDistance/i,axis1.numMajorTicks=new BigNumber(Math.round(axis1.handleTicks*scaleRatio*100)/100),2e3<axis1.numMajorTicks||axis1.numMajorTicks<1&&(axis1.numMajorTicks=1),axis1.draw(),allowPinchZoom=!1,initialDistance=i):50<=i-initialDistance&&(l(),tempX=e.x,scaleRatio=initialDistance/i,axis1.numMajorTicks=new BigNumber(Math.round(axis1.handleTicks*scaleRatio*100)/100),2e3<axis1.numMajorTicks||axis1.numMajorTicks<1&&(axis1.numMajorTicks=1),initialDistance=i,axis1.draw(),allowPinchZoom=!1)):1==t.targetTouches.length&&singletouch&&(i=t.targetTouches[0].pageX-n-g,swipeIndicator.css("left",t.targetTouches[0].pageX-swipeIndicator.width()/2),Math.abs(i)>axis1.majorTickDist&&(g=t.targetTouches[0].pageX-n,l(),0<i?axis1.moveAxis(!1):axis1.moveAxis(!0)))),"one"==types){refreshWindow();for(var o=0;o<markers.length;o++)markers[o].x=axis1.getX(markers[o].unitVal),25<=markers[o].x&&markers[o].x<=1e3&&(markers[o].draw(),0<o&&connectMarkers(markers[o],markers[o-1],o))}else if("two"==types||"three"==types){refreshWindow();for(var o=0;o<markers.length;o++)markers[o].x=axis1.getX(markers[o].unitVal),25<=markers[o].x&&markers[o].x<=1e3&&(markers[o].draw(),o%2==1&&(connectMarkers(markers[o-1],markers[o],o),markers[o].unitVal=axis1.getUnit(markers[o].x)))}}}function e(e){if(activityStarted){var t=e,r=new n(0,0),a=function(e){var t=0,r=0;if(e.offsetParent){for(;t+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;);return{x:t,y:r}}}(h);switch(e.type){case"mousedown":r.x=t.pageX-a.x,r.y=t.pageY-a.y,u=15,s(r,e);break;case"mouseup":buttonDown=!1;break;case"mousemove":r.x=t.pageX-a.x,r.y=t.pageY-a.y,u=15,i(r,e);break;case"touchstart":r.x=t.targetTouches[0].pageX-a.x,r.y=t.targetTouches[0].pageY-a.y,u=20,s(r,e);break;case"touchend":buttonDown=!1,$(".markers").css("display","none");break;case"touchmove":r.x=t.targetTouches[0].pageX-a.x,r.y=t.targetTouches[0].pageY-a.y,u=20,i(r,e)}}}function l(){var e=context.canvas.height;m("Clearing Window"),c&&(e=265),context.globalAlpha=1,context.fillStyle="#99cc66",context.fillRect(0,0,context.canvas.width,e)}context.canvas.width=1e3,context.canvas.height=450,context.fillStyle="#99cc66",context.fillRect(0,0,context.canvas.width,context.canvas.height),axis1.end=context.canvas.width-20,axis1.draw(),m("Canvas Size: "+context.canvas.width+":"+context.canvas.height),m("Window Size: "+window.innerWidth+"px:"+window.innerHeight+"px"),leftMarkerSmallRange=$(".leftMarkerSmallRange"),leftMarkerSmallRangeSpan=$(".leftMarkerSmallRange .numberpart span"),rightMarkerSmallRange=$(".rightMarkerSmallRange"),rightMarkerSmallRangeSpan=$(".rightMarkerSmallRange .numberpart span"),leftMarkerBigRange=$(".leftMarkerBigRange"),leftMarkerBigRangeSpan=$(".leftMarkerBigRange .numberpart span"),rightMarkerBigRange=$(".rightMarkerBigRange"),rightMarkerBigRangeSpan=$(".rightMarkerBigRange .numberpart span"),swipeIndicator=$(".swipeIndicator"),window.addEventListener("selectstart",function(e){return e.preventDefault(),!1},!1),window.addEventListener("onselect",function(e){return e.preventDefault(),!1},!1),window.addEventListener("touchmove",function(e){return e.preventDefault(),!1},!1),window.addEventListener("resize",k,!1),window.addEventListener("touchstart",e,!1),window.addEventListener("touchmove",e,!1),window.addEventListener("touchend",e,!1),window.addEventListener("mousedown",e,!1),window.addEventListener("mousemove",e,!1),window.addEventListener("mouseup",e,!1),document.body.addEventListener("touchmove",function(e){e.preventDefault(),document.body.addEventListener("selectstart",function(e){return e.preventDefault(),!1},!1)},!1)},!1),$("#canvas1").css("background","none");var p=$('<div id="interactive-container" />'),f=$('<div id="page-container" />'),b=$('<div id="page-0" class="page"><div class"testingArea"></div><div class="tablecon">\x3c!--<table border="1" cellspacing="0";  sytle="backgroud-color:#EEEFB6;" class="container" ><thead style="background-color:#51800B;font-color:white;"><tr><th colspan="2" style="color:white;" >Single-batch Recipe:</th><th  colspan="2"  style="color:white;">Triple-batch Recipe:</th></tr></thead><tbody><tr><td><span class="one">1</span><span class="two"><span class="three">2</span><span class="four">3</span></span></td><td>cups all-purpose flour</td><td><div id="x1" class="numTxt" contentEditable="false"></div></td><td>cup(s) all-purpose flour</td></tr><tr><td><span class="one Pos">1</span></td><td>teaspoon baking soda</td><td><div id="x2" class="numTxt" contentEditable="false"></div></td><td>teaspoon(s) baking soda</td></tr><tr><td><span class="two Pos"><span class="three">1</span><span class="four">4</span></span></td><td>teaspoon salt</td><td><div id="x3" class="numTxt" contentEditable="false"></div></td><td>teaspoon(s) salt</td></tr><tr><td><span class="two"><span class="three Pos">1</span><span class="four Pos">2</span></span></td><td>cup butter</td><td><div id="x4" class="numTxt" contentEditable="false"></div></td><td>cup butter</td></tr><tr><td><span class="two"><span class="three Pos">3</span><span class="four Pos">4</span></span></td><td>cup brown sugar</td><td><div id="x5" class="numTxt" contentEditable="false"></div></td><td>cup brown sugar</td></tr><tr><td><span class="one Pos">2</span></td><td>eggs, beaten</td><td><div id="x6" class="numTxt" contentEditable="false"></div></td><td>eggs, beaten</td></tr><tr><td><span class="one">2</span><span class="two"><span class="three">1</span><span class="four">3</span></span></td><td>cups mashed overripe bananas</td><td><div id="x7" class="numTxt" contentEditable="false"></div></td><td>cups mashed overripe bananas</td></tr></tbody></table>--\x3e</div></div>'),v=$('<div ><input id="editorTxt1" type="hidden" /></div>'),y=$('<div id="vkeyCont"/>');b.append(v),p.append(y),f.append(b),p.append(f),f.css("display","none"),f.css("display","none"),$("#mainContainer").append(p),$("#infoContainer").css("display","none"),$("#mainContainerHidden").css("display","none"),activityStarted=!0});var color1,markers=[],colors=[],setting="add",types="two",grabbed=null,yCurve=[],prevClick="one",inputCounter=0,clicked=!1,clickedSubtract=!1,isEraseClicked=!1,deleteType="two",selectedFraction="10",typesArray=[];function marker(e,t,r,a,n,s){this.x=e,this.y=t,this.size=r,this.set=a,this.label=!1,this.draw=drawMarker,this.color1=n,this.unitVal=0,this.prevX=0,this.prevY=0,this.prevVal=0,this.arrowDirection="",this.number=s,this.hasInputBox=0}function refreshWindow(){var e=context.canvas.height;context.globalAlpha=1,context.fillStyle="#99cc66",context.fillRect(0,0,context.canvas.width,e),axis1.draw(),console.log("refresh window callled.............")}function connectMarkers(e,t,r){var a,n,s;"subtract"!=setting?"one"==types?(context.lineWidth=2,context.strokeStyle=e.color1,e.x==t.x&&(context.strokeStyle="green",context.lineWidth=4),context.beginPath(),t.y=e.y,a=min(e.x,t.x),n=max(e.x,t.x),context.moveTo(a,e.y),s=yCurve[e.number-1],"right"!==e.arrowDirection&&"left"!==e.arrowDirection||context.bezierCurveTo(a+Math.abs(e.x-t.x)/3,e.y-s,a+Math.abs(e.x-t.x)/3*2,e.y-s,n,t.y),context.stroke(),e.draw(),t.draw(),num=t.unitVal+e.unitVal,num=Math.round(100*num)/100,num):"two"==types?(context.lineWidth=2,context.strokeStyle=e.color1,e.x==t.x&&(context.strokeStyle="green",context.lineWidth=4),context.beginPath(),t.y=e.y,a=min(e.x,t.x),n=max(e.x,t.x),context.moveTo(a,e.y),s=yCurve[t.number-1],context.bezierCurveTo(a+Math.abs(e.x-t.x)/3,e.y-s,a+Math.abs(e.x-t.x)/3*2,e.y-s,n,t.y),"right"==t.arrowDirection?(context.moveTo(t.x-15,e.y-10),context.lineTo(t.x,e.y),context.lineTo(t.x+5,e.y-15)):(context.moveTo(t.x+15,e.y-10),context.lineTo(t.x,e.y),context.lineTo(t.x-5,e.y-15)),context.stroke(),e.draw(),t.draw(),t.globalAlpha=0,num=t.unitVal+e.unitVal,num=Math.round(100*num)/100,num):"three"==types&&(context.lineWidth=2,context.strokeStyle=e.color1,e.x==t.x&&(context.strokeStyle="green",context.lineWidth=4),context.beginPath(),t.y=e.y,a=min(e.x,t.x),n=max(e.x,t.x),context.moveTo(a,e.y),s=yCurve[t.number-1],context.bezierCurveTo(a+Math.abs(e.x-t.x)/3,e.y-s,a+Math.abs(e.x-t.x)/3*2,e.y-s,n,t.y),"left"==t.arrowDirection?(context.moveTo(t.x-15,e.y-10),context.lineTo(t.x,e.y),context.lineTo(t.x+5,e.y-15)):(context.moveTo(t.x+15,e.y-10),context.lineTo(t.x,e.y),context.lineTo(t.x-5,e.y-15)),context.stroke(),e.draw(),t.draw(),t.globalAlpha=0,num=t.unitVal+e.unitVal,num=Math.round(100*num)/100,num):(context.lineWidth=2,context.strokeStyle=e.color1,e.x==t.x&&(context.strokeStyle="green",context.lineWidth=4),context.beginPath(),t.y=e.y,a=min(e.x,t.x),n=max(e.x,t.x),s=yCurve[e.number-1]+10*e.number-20,context.moveTo(e.x,e.y-s-20),context.lineTo(t.x,t.y-s-20),t.x>e.x||(t.x,e.x),context.stroke(),e.draw(),t.draw(),num=e.unitVal-t.unitVal,num=Math.round(100*num)/100,num)}function convertToFraction(e,t,r,a,n){e=Math.round(100*e)/100;var s=0;fraction=0,FractionNum?(e%1==0?s=e:(s+=Math.floor(e),fraction=Math.round(e%1*10),fraction=Math.floor(fraction)),0!==s&&(context.font="bold "+(a+5)+"pt Arial",context.textAlign="center",context.fillStyle=n,context.fillText(s,t,r-5)),0!==fraction&&(context.font="bold "+a+"pt Arial",context.textAlign="center",context.fillStyle=n,1<(s+"").length?(context.fillText(fraction,t+20+6*((s+"").length-1),r),console.log(fraction,t+20+6*((s+"").length-1),r)):0===s?(context.fillText(fraction,t,r-20),context.beginPath(),context.moveTo(t-10,r-15),context.lineTo(t+10,r-15),context.strokeStyle=n,context.lineWidth=1,context.stroke(),context.fillText(selectedFraction,t,r)):(context.fillText(fraction,t+20,r-20),context.beginPath(),context.moveTo(t+10,r-15),context.lineTo(t+30,r-15),context.strokeStyle=n,context.lineWidth=1,context.stroke(),context.fillText(selectedFraction,t+20,r)),console.log("fraction -- "+fraction+" text -- "+s+" selectedFraction -- "+selectedFraction))):(context.font="bold "+a+"pt Arial",context.textAlign="center","#ffffff"==(context.fillStyle=n)?0===inputBoxArray.length?((n={}).markerId=markers.length/2,n.grabbed=grabbed,n.inputCanvas=void 0,inputBoxArray.push(n),markersTempArray[markers.length/2-1-1]=n,markersTempArray.push(n),console.log(inputBoxArray),console.log("input box array length :"+inputBoxArray.length)):($(".marker"+grabbed),inputCounter++):context.fillText(e,t,r))}function min(e,t){return e<=t?e:t}function max(e,t){return t<=e?e:t}function bindKeyPad(){new vKeyPad(".numTxt");$(".keypadHolder").draggable({containment:"#vkeyCont"})}function closeIkeypad(){}function onTextChanged(e){}function splitNChars(e,t){for(var r=[],a="",n=0;n<e.length;n+=t)3==n||4==n?r.push("0"):r.push(e.substr(n,t)),a+=r[n];return a}$(document).ready(function(){$("#subtract").click(function(e){var t,r,a;void 0!==e.pageX&&void 0!==e.pageY||(e.pageX=500,e.pageY=564),-1===jQuery.inArray("two",typesArray)?(clicked=!0,$("#scaleHidden").css("display","block"),setting="subtract",types="one",typesArray.push("subtract"),!(deleteType="four")===clickedSubtract?(r="#"+function e(t){return(t+=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"][Math.floor(16*Math.random())])&&6==t.length?t:e(t)}(""),t="#"+function e(t){return(t+=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"][Math.floor(16*Math.random())])&&6==t.length?t:e(t)}(""),r=splitNChars(r,1),t=splitNChars(t,1),a=new marker(0,0,5,!1,r,markers.length),t=new marker(0,0,5,!1,t,markers.length+1),colors.push(r),a.x=e.pageX-$("#canvas1").offset().left+50*markers.length,a.y=200,a.unitVal=axis1.getUnit(a.x),a.draw(),t.x=a.x+70,t.y=200,t.unitVal=axis1.getUnit(a.x+70),t.draw(),markers.push(a),markers.push(t),yCurve.push(50+5*markers.length)):(a=new marker(0,0,5,!1,r=splitNChars(r="#"+function e(t){return(t+=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"][Math.floor(16*Math.random())])&&6==t.length?t:e(t)}(""),1),markers.length),colors.push(r),a.x=e.pageX-$("#canvas1").offset().left+50*markers.length,a.y=200,a.unitVal=axis1.getUnit(a.x),a.draw(),markers.push(a)),yCurve.push(50+5*markers.length),1<=(a=markers.length-1)&&connectMarkers(markers[a],markers[a-1]),clickedSubtract=!0):($("#errorContainer").css("display","block"),$("#errorContainer").data("target",e.target.id))}),$("#reset").click(function(e){(isEraseClicked=!isEraseClicked)?$("#reset").addClass("reset_selected"):$("#reset").removeClass("reset_selected")}),$("#adddot").click(function(e){var t,r;$("#scaleHidden").css("display","block"),setting="add",$(".numTxt").remove(),$("#vkeyCont").html(""),clicked=!0,typesArray.push("one"),"one"==prevClick?(deleteType=types="one",0==buttonDown&&($("#debug").append("  buttonDown    "+buttonDown),r=new marker(0,0,5,!1,t=splitNChars(t="#"+function e(t){return(t+=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"][Math.floor(16*Math.random())])&&6==t.length?t:e(t)}(""),1),markers.length),colors.push(t),r.x=e.pageX-$("#canvas1").offset().left+40*markers.length,r.y=200,r.unitVal=axis1.getUnit(r.x),r.draw(),markers.push(r),yCurve.push(50+5*markers.length),markers.length)):(prevClick="one")==prevClick&&(deleteType=types="one",0==buttonDown&&(r=new marker(0,0,5,!1,t=splitNChars(t="#"+function e(t){return(t+=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"][Math.floor(16*Math.random())])&&6==t.length?t:e(t)}(""),1),markers.length),colors.push(t),r.x=e.pageX-$("#canvas1").offset().left+40*markers.length,r.y=200,r.unitVal=axis1.getUnit(r.x),r.draw(),markers.push(r),yCurve.push(50+5*markers.length),markers.length,$("#debug").append("  done2    ")))}),$("#add").click(function(e){var t,r,a;void 0!==e.pageX&&void 0!==e.pageY||(e.pageX=348,e.pageY=585),-1===jQuery.inArray("subtract",typesArray)?($("#scaleHidden").css("display","block"),clicked=!0,inputBoxArray=[],setting="add",typesArray.push("two"),"two"==prevClick?(deleteType=types="two",0==buttonDown&&(r=new marker(0,0,5,!1,t=splitNChars(t="#"+function e(t){return(t+=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"][Math.floor(16*Math.random())])&&6==t.length?t:e(t)}(""),1),markers.length),a=new marker(0,0,5,!1,"transparent",markers.length+1),colors.push(t),r.x=e.pageX-$("#canvas1").offset().left+50*markers.length,r.prevX=e.pageX-$("#canvas1").offset().left+50*markers.length,r.y=200,r.unitVal=axis1.getUnit(r.x),console.log("x value --- "+markerA.x),r.arrowDirection="right",r.draw(),a.x=r.x+70,a.prevX=r.x+70,a.y=200,a.unitVal=axis1.getUnit(r.x+70),a.arrowDirection="right",a.draw(),markers.push(r),markers.push(a),yCurve.push(50+5*markers.length),yCurve.push(50+5*markers.length),markers.length,connectMarkers(r,a))):(deleteType=types=prevClick="two",0==buttonDown&&(r=new marker(0,0,5,!1,t=splitNChars(t="#"+function e(t){return(t+=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"][Math.floor(16*Math.random())])&&6==t.length?t:e(t)}(""),1),markers.length),a=new marker(0,0,5,!1,"transparent",markers.length+1),colors.push(t),r.x=e.pageX-$("#canvas1").offset().left+50*markers.length,r.prevX=e.pageX-$("#canvas1").offset().left+50*markers.length,r.y=200,r.unitVal=axis1.getUnit(r.x),console.log("x value --- "+markerA.x),r.arrowDirection="right",r.draw(),a.x=r.x+70,a.prevX=r.x+70,a.y=200,a.unitVal=axis1.getUnit(r.x+70),a.arrowDirection="right",a.draw(),markers.push(r),markers.push(a),yCurve.push(50+5*markers.length),yCurve.push(50+5*markers.length),markers.length,connectMarkers(r,a)))):($("#errorContainer").css("display","block"),$("#errorContainer").data("target",e.target.id))}),$("#addback").click(function(e){var t,r,a;void 0!==e.pageX&&void 0!==e.pageY||(e.pageX=348,e.pageY=585),-1===jQuery.inArray("subtract",typesArray)?($("#scaleHidden").css("display","block"),clicked=!0,inputBoxArray=[],setting="add",typesArray.push("two"),"three"==prevClick?(deleteType=types="three",0==buttonDown&&(r=new marker(0,0,5,!1,t=splitNChars(t="#"+function e(t){return(t+=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"][Math.floor(16*Math.random())])&&6==t.length?t:e(t)}(""),1),markers.length),a=new marker(0,0,5,!1,"transparent",markers.length+1),colors.push(t),r.x=e.pageX-$("#canvas1").offset().left+50*markers.length,r.prevX=e.pageX-$("#canvas1").offset().left+50*markers.length,r.y=200,r.unitVal=axis1.getUnit(r.x),r.arrowDirection="left",r.draw(),a.x=r.x-70,a.prevX=r.x-70,a.y=200,a.unitVal=axis1.getUnit(r.x-70),a.arrowDirection="left",a.draw(),markers.push(r),markers.push(a),yCurve.push(50+5*markers.length),yCurve.push(50+5*markers.length),markers.length,connectMarkers(r,a))):(deleteType=types=prevClick="three",0==buttonDown&&(r=new marker(0,0,5,!1,t=splitNChars(t="#"+function e(t){return(t+=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"][Math.floor(16*Math.random())])&&6==t.length?t:e(t)}(""),1),markers.length),a=new marker(0,0,5,!1,"transparent",markers.length+1),colors.push(t),r.x=e.pageX-$("#canvas1").offset().left+50*markers.length,r.prevX=e.pageX-$("#canvas1").offset().left+50*markers.length,r.y=200,r.unitVal=axis1.getUnit(r.x),r.arrowDirection="left",r.draw(),a.x=r.x-70,a.prevX=r.x-70,a.y=200,a.unitVal=axis1.getUnit(r.x-70),a.arrowDirection="left",a.draw(),markers.push(r),markers.push(a),yCurve.push(50+5*markers.length),yCurve.push(50+5*markers.length),markers.length,connectMarkers(r,a))),console.log(markers)):($("#errorContainer").css("display","block"),$("#errorContainer").data("target",e.target.id))})});